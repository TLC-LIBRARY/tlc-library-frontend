{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('session_token');\n        if (storedToken) {\n          setToken(storedToken);\n          const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${storedToken}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        session_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('session_token', session_token);\n      setToken(session_token);\n      setUser(userData);\n      return userData;\n    };\n    const register = async (email, name, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        email,\n        name,\n        password\n      });\n      const {\n        session_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('session_token', session_token);\n      setToken(session_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      console.log('AuthContext: logout called');\n      try {\n        if (token) {\n          console.log('AuthContext: calling backend logout API');\n          await axios.default.post(`${API_URL}/api/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          console.log('AuthContext: backend logout successful');\n        }\n      } catch (error) {\n        console.log('Logout error:', error);\n      } finally {\n        // Clear AsyncStorage first\n        console.log('AuthContext: clearing AsyncStorage');\n        await AsyncStorage.default.removeItem('session_token');\n        console.log('AuthContext: AsyncStorage cleared');\n\n        // Then clear state - this order ensures clean logout\n        console.log('AuthContext: clearing user and token state');\n        setUser(null);\n        setToken(null);\n        console.log('AuthContext: logout complete, user and token set to null');\n        // DON'T set loading state - let checkAuth manage it\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        checkAuth\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":151,"map":[[15,2,28,0,"Object"],[15,8,28,0],[15,9,28,0,"defineProperty"],[15,23,28,0],[15,24,28,0,"exports"],[15,31,28,0],[16,4,28,0,"enumerable"],[16,14,28,0],[17,4,28,0,"get"],[17,7,28,0],[17,18,28,0,"get"],[17,19,28,0],[18,6,28,0],[18,13,28,0,"AuthProvider"],[18,25,28,0],[19,4,28,0],[20,2,28,0],[21,2,106,0,"Object"],[21,8,106,0],[21,9,106,0,"defineProperty"],[21,23,106,0],[21,24,106,0,"exports"],[21,31,106,0],[22,4,106,0,"enumerable"],[22,14,106,0],[23,4,106,0,"get"],[23,7,106,0],[23,18,106,0,"get"],[23,19,106,0],[24,6,106,0],[24,13,106,0,"useAuth"],[24,20,106,0],[25,4,106,0],[26,2,106,0],[27,2,112,2],[27,6,112,2,"_expoVirtualEnv"],[27,21,112,2],[27,24,112,2,"require"],[27,31,112,2],[27,32,112,2,"_dependencyMap"],[27,46,112,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,5,0],[34,8,5,6,"API_URL"],[34,15,5,13],[34,18,5,13,"_expoVirtualEnv"],[34,33,5,13],[34,34,5,13,"env"],[34,37,5,13],[34,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[34,61,5,51],[35,2,26,0],[35,8,26,6,"AuthContext"],[35,19,26,17],[35,35,26,20],[35,39,26,20,"createContext"],[35,45,26,33],[35,46,26,33,"createContext"],[35,59,26,33],[35,61,26,63,"undefined"],[35,70,26,72],[35,71,26,73],[36,2,28,7],[36,8,28,13,"AuthProvider"],[36,20,28,66],[36,23,28,69,"AuthProvider"],[36,24,28,70],[37,4,28,72,"children"],[38,2,28,81],[38,3,28,82],[38,8,28,87],[39,4,28,87,"_s"],[39,6,28,87],[40,4,29,2],[40,10,29,8],[40,11,29,9,"user"],[40,15,29,13],[40,17,29,15,"setUser"],[40,24,29,22],[40,25,29,23],[40,28,29,26],[40,32,29,26,"useState"],[40,38,29,34],[40,39,29,34,"useState"],[40,47,29,34],[40,49,29,48],[40,53,29,52],[40,54,29,53],[41,4,30,2],[41,10,30,8],[41,11,30,9,"token"],[41,16,30,14],[41,18,30,16,"setToken"],[41,26,30,24],[41,27,30,25],[41,30,30,28],[41,34,30,28,"useState"],[41,40,30,36],[41,41,30,36,"useState"],[41,49,30,36],[41,51,30,52],[41,55,30,56],[41,56,30,57],[42,4,31,2],[42,10,31,8],[42,11,31,9,"loading"],[42,18,31,16],[42,20,31,18,"setLoading"],[42,30,31,28],[42,31,31,29],[42,34,31,32],[42,38,31,32,"useState"],[42,44,31,40],[42,45,31,40,"useState"],[42,53,31,40],[42,55,31,41],[42,59,31,45],[42,60,31,46],[43,4,33,2],[43,8,33,2,"useEffect"],[43,14,33,11],[43,15,33,11,"useEffect"],[43,24,33,11],[43,26,33,12],[43,32,33,18],[44,6,34,4,"checkAuth"],[44,15,34,13],[44,16,34,14],[44,17,34,15],[45,4,35,2],[45,5,35,3],[45,7,35,5],[45,9,35,7],[45,10,35,8],[46,4,37,2],[46,10,37,8,"checkAuth"],[46,19,37,17],[46,22,37,20],[46,28,37,20,"checkAuth"],[46,29,37,20],[46,34,37,32],[47,6,38,4],[47,10,38,8],[48,8,39,6],[48,14,39,12,"storedToken"],[48,25,39,23],[48,28,39,26],[48,34,39,32,"AsyncStorage"],[48,46,39,44],[48,47,39,44,"default"],[48,54,39,44],[48,55,39,45,"getItem"],[48,62,39,52],[48,63,39,53],[48,78,39,68],[48,79,39,69],[49,8,40,6],[49,12,40,10,"storedToken"],[49,23,40,21],[49,25,40,23],[50,10,41,8,"setToken"],[50,18,41,16],[50,19,41,17,"storedToken"],[50,30,41,28],[50,31,41,29],[51,10,42,8],[51,16,42,14,"response"],[51,24,42,22],[51,27,42,25],[51,33,42,31,"axios"],[51,38,42,36],[51,39,42,36,"default"],[51,46,42,36],[51,47,42,37,"get"],[51,50,42,40],[51,51,42,41],[51,54,42,44,"API_URL"],[51,61,42,51],[51,75,42,65],[51,77,42,67],[52,12,43,10,"headers"],[52,19,43,17],[52,21,43,19],[53,14,43,21,"Authorization"],[53,27,43,34],[53,29,43,36],[53,39,43,46,"storedToken"],[53,50,43,57],[54,12,43,60],[55,10,44,8],[55,11,44,9],[55,12,44,10],[56,10,45,8,"setUser"],[56,17,45,15],[56,18,45,16,"response"],[56,26,45,24],[56,27,45,25,"data"],[56,31,45,29],[56,32,45,30],[57,8,46,6],[58,6,47,4],[58,7,47,5],[58,8,47,6],[58,15,47,13,"error"],[58,20,47,18],[58,22,47,20],[59,8,48,6,"console"],[59,15,48,13],[59,16,48,14,"log"],[59,19,48,17],[59,20,48,18],[59,40,48,38],[59,42,48,40,"error"],[59,47,48,45],[59,48,48,46],[60,8,49,6],[60,14,49,12,"AsyncStorage"],[60,26,49,24],[60,27,49,24,"default"],[60,34,49,24],[60,35,49,25,"removeItem"],[60,45,49,35],[60,46,49,36],[60,61,49,51],[60,62,49,52],[61,6,50,4],[61,7,50,5],[61,16,50,14],[62,8,51,6,"setLoading"],[62,18,51,16],[62,19,51,17],[62,24,51,22],[62,25,51,23],[63,6,52,4],[64,4,53,2],[64,5,53,3],[65,4,55,2],[65,10,55,8,"login"],[65,15,55,13],[65,18,55,16],[65,24,55,16,"login"],[65,25,55,23,"email"],[65,30,55,36],[65,32,55,38,"password"],[65,40,55,54],[65,45,55,59],[66,6,56,4],[66,12,56,10,"response"],[66,20,56,18],[66,23,56,21],[66,29,56,27,"axios"],[66,34,56,32],[66,35,56,32,"default"],[66,42,56,32],[66,43,56,33,"post"],[66,47,56,37],[66,48,56,38],[66,51,56,41,"API_URL"],[66,58,56,48],[66,75,56,65],[66,77,56,67],[67,8,56,69,"email"],[67,13,56,74],[68,8,56,76,"password"],[69,6,56,85],[69,7,56,86],[69,8,56,87],[70,6,57,4],[70,12,57,10],[71,8,57,12,"session_token"],[71,21,57,25],[72,8,57,27,"user"],[72,12,57,31],[72,14,57,33,"userData"],[73,6,57,42],[73,7,57,43],[73,10,57,46,"response"],[73,18,57,54],[73,19,57,55,"data"],[73,23,57,59],[74,6,58,4],[74,12,58,10,"AsyncStorage"],[74,24,58,22],[74,25,58,22,"default"],[74,32,58,22],[74,33,58,23,"setItem"],[74,40,58,30],[74,41,58,31],[74,56,58,46],[74,58,58,48,"session_token"],[74,71,58,61],[74,72,58,62],[75,6,59,4,"setToken"],[75,14,59,12],[75,15,59,13,"session_token"],[75,28,59,26],[75,29,59,27],[76,6,60,4,"setUser"],[76,13,60,11],[76,14,60,12,"userData"],[76,22,60,20],[76,23,60,21],[77,6,61,4],[77,13,61,11,"userData"],[77,21,61,19],[78,4,62,2],[78,5,62,3],[79,4,64,2],[79,10,64,8,"register"],[79,18,64,16],[79,21,64,19],[79,27,64,19,"register"],[79,28,64,26,"email"],[79,33,64,39],[79,35,64,41,"name"],[79,39,64,53],[79,41,64,55,"password"],[79,49,64,71],[79,54,64,76],[80,6,65,4],[80,12,65,10,"response"],[80,20,65,18],[80,23,65,21],[80,29,65,27,"axios"],[80,34,65,32],[80,35,65,32,"default"],[80,42,65,32],[80,43,65,33,"post"],[80,47,65,37],[80,48,65,38],[80,51,65,41,"API_URL"],[80,58,65,48],[80,78,65,68],[80,80,65,70],[81,8,65,72,"email"],[81,13,65,77],[82,8,65,79,"name"],[82,12,65,83],[83,8,65,85,"password"],[84,6,65,94],[84,7,65,95],[84,8,65,96],[85,6,66,4],[85,12,66,10],[86,8,66,12,"session_token"],[86,21,66,25],[87,8,66,27,"user"],[87,12,66,31],[87,14,66,33,"userData"],[88,6,66,42],[88,7,66,43],[88,10,66,46,"response"],[88,18,66,54],[88,19,66,55,"data"],[88,23,66,59],[89,6,67,4],[89,12,67,10,"AsyncStorage"],[89,24,67,22],[89,25,67,22,"default"],[89,32,67,22],[89,33,67,23,"setItem"],[89,40,67,30],[89,41,67,31],[89,56,67,46],[89,58,67,48,"session_token"],[89,71,67,61],[89,72,67,62],[90,6,68,4,"setToken"],[90,14,68,12],[90,15,68,13,"session_token"],[90,28,68,26],[90,29,68,27],[91,6,69,4,"setUser"],[91,13,69,11],[91,14,69,12,"userData"],[91,22,69,20],[91,23,69,21],[92,4,70,2],[92,5,70,3],[93,4,72,2],[93,10,72,8,"logout"],[93,16,72,14],[93,19,72,17],[93,25,72,17,"logout"],[93,26,72,17],[93,31,72,29],[94,6,73,4,"console"],[94,13,73,11],[94,14,73,12,"log"],[94,17,73,15],[94,18,73,16],[94,46,73,44],[94,47,73,45],[95,6,74,4],[95,10,74,8],[96,8,75,6],[96,12,75,10,"token"],[96,17,75,15],[96,19,75,17],[97,10,76,8,"console"],[97,17,76,15],[97,18,76,16,"log"],[97,21,76,19],[97,22,76,20],[97,63,76,61],[97,64,76,62],[98,10,77,8],[98,16,77,14,"axios"],[98,21,77,19],[98,22,77,19,"default"],[98,29,77,19],[98,30,77,20,"post"],[98,34,77,24],[98,35,77,25],[98,38,77,28,"API_URL"],[98,45,77,35],[98,63,77,53],[98,65,77,55],[98,66,77,56],[98,67,77,57],[98,69,77,59],[99,12,78,10,"headers"],[99,19,78,17],[99,21,78,19],[100,14,78,21,"Authorization"],[100,27,78,34],[100,29,78,36],[100,39,78,46,"token"],[100,44,78,51],[101,12,78,54],[102,10,79,8],[102,11,79,9],[102,12,79,10],[103,10,80,8,"console"],[103,17,80,15],[103,18,80,16,"log"],[103,21,80,19],[103,22,80,20],[103,62,80,60],[103,63,80,61],[104,8,81,6],[105,6,82,4],[105,7,82,5],[105,8,82,6],[105,15,82,13,"error"],[105,20,82,18],[105,22,82,20],[106,8,83,6,"console"],[106,15,83,13],[106,16,83,14,"log"],[106,19,83,17],[106,20,83,18],[106,35,83,33],[106,37,83,35,"error"],[106,42,83,40],[106,43,83,41],[107,6,84,4],[107,7,84,5],[107,16,84,14],[108,8,85,6],[109,8,86,6,"console"],[109,15,86,13],[109,16,86,14,"log"],[109,19,86,17],[109,20,86,18],[109,56,86,54],[109,57,86,55],[110,8,87,6],[110,14,87,12,"AsyncStorage"],[110,26,87,24],[110,27,87,24,"default"],[110,34,87,24],[110,35,87,25,"removeItem"],[110,45,87,35],[110,46,87,36],[110,61,87,51],[110,62,87,52],[111,8,88,6,"console"],[111,15,88,13],[111,16,88,14,"log"],[111,19,88,17],[111,20,88,18],[111,55,88,53],[111,56,88,54],[113,8,90,6],[114,8,91,6,"console"],[114,15,91,13],[114,16,91,14,"log"],[114,19,91,17],[114,20,91,18],[114,64,91,62],[114,65,91,63],[115,8,92,6,"setUser"],[115,15,92,13],[115,16,92,14],[115,20,92,18],[115,21,92,19],[116,8,93,6,"setToken"],[116,16,93,14],[116,17,93,15],[116,21,93,19],[116,22,93,20],[117,8,94,6,"console"],[117,15,94,13],[117,16,94,14,"log"],[117,19,94,17],[117,20,94,18],[117,78,94,76],[117,79,94,77],[118,8,95,6],[119,6,96,4],[120,4,97,2],[120,5,97,3],[121,4,99,2],[121,24,100,4],[121,28,100,4,"_reactJsxDevRuntime"],[121,47,100,4],[121,48,100,4,"jsxDEV"],[121,54,100,4],[121,56,100,5,"AuthContext"],[121,67,100,16],[121,68,100,17,"Provider"],[121,76,100,25],[122,6,100,26,"value"],[122,11,100,31],[122,13,100,33],[123,8,100,35,"user"],[123,12,100,39],[124,8,100,41,"token"],[124,13,100,46],[125,8,100,48,"loading"],[125,15,100,55],[126,8,100,57,"login"],[126,13,100,62],[127,8,100,64,"register"],[127,16,100,72],[128,8,100,74,"logout"],[128,14,100,80],[129,8,100,82,"checkAuth"],[130,6,100,92],[130,7,100,94],[131,6,100,94,"children"],[131,14,100,94],[131,16,101,7,"children"],[132,4,101,15],[133,6,101,15,"fileName"],[133,14,101,15],[133,16,101,15,"_jsxFileName"],[133,28,101,15],[134,6,101,15,"lineNumber"],[134,16,101,15],[135,6,101,15,"columnNumber"],[135,18,101,15],[136,4,101,15],[136,11,102,26],[136,12,102,27],[137,2,104,0],[137,3,104,1],[138,2,104,2,"_s"],[138,4,104,2],[138,5,28,13,"AuthProvider"],[138,17,28,66],[139,2,28,66,"_c"],[139,4,28,66],[139,7,28,13,"AuthProvider"],[139,19,28,66],[140,2,106,7],[140,8,106,13,"useAuth"],[140,15,106,20],[140,18,106,23,"useAuth"],[140,19,106,23],[140,24,106,29],[141,4,106,29,"_s2"],[141,7,106,29],[142,4,107,2],[142,10,107,8,"context"],[142,17,107,15],[142,20,107,18],[142,24,107,18,"useContext"],[142,30,107,28],[142,31,107,28,"useContext"],[142,41,107,28],[142,43,107,29,"AuthContext"],[142,54,107,40],[142,55,107,41],[143,4,108,2],[143,8,108,6],[143,9,108,7,"context"],[143,16,108,14],[143,18,108,16],[144,6,109,4],[144,12,109,10],[144,16,109,14,"Error"],[144,21,109,19],[144,22,109,20],[144,64,109,62],[144,65,109,63],[145,4,110,2],[146,4,111,2],[146,11,111,9,"context"],[146,18,111,16],[147,2,112,0],[147,3,112,1],[148,2,112,2,"_s2"],[148,5,112,2],[148,6,106,13,"useAuth"],[148,13,106,20],[149,2,106,20],[149,6,106,20,"_c"],[149,8,106,20],[150,2,106,20,"$RefreshReg$"],[150,14,106,20],[150,15,106,20,"_c"],[150,17,106,20],[151,0,106,20],[151,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","useAuth"],"mappings":"AAA;qEC2B;YCK;GDE;oBEE;GFgB;gBGE;GHO;mBIE;GJM;iBKE;GLyB;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}