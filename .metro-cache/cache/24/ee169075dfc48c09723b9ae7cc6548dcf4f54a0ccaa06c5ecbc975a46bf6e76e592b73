{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return h}});var o=r(d[0]),t=e(r(d[1])),n=e(r(d[2])),s=r(d[3]);const l=process.env.EXPO_PUBLIC_BACKEND_URL,u=(0,o.createContext)(void 0),c=({children:e})=>{const[c,h]=(0,o.useState)(null),[f,A]=(0,o.useState)(null),[p,k]=(0,o.useState)(!0);(0,o.useEffect)(()=>{w()},[]);const w=async()=>{console.log('=== AUTH CHECK INITIATED ===');try{const e=await t.default.getItem('session_token');if(console.log('Stored token found:',e?'YES':'NO'),e){console.log('Setting token in state first...'),A(e),await new Promise(e=>setTimeout(e,100)),console.log('Fetching user data from /api/auth/me');const o=await n.default.get(`${l}/api/auth/me`,{headers:{Authorization:`Bearer ${e}`}});console.log('User data received:',o.data),h(o.data),console.log('\\u2705 Auth check complete - user authenticated')}else console.log('No token found - user not authenticated')}catch(e){console.error('=== AUTH CHECK FAILED ==='),console.error('Error:',e),console.error('Response:',e.response?.data),await t.default.removeItem('session_token'),A(null),h(null)}finally{k(!1),console.log('=== AUTH CHECK FINISHED ===')}};return(0,s.jsx)(u.Provider,{value:{user:c,token:f,loading:p,login:async(e,o)=>{console.log('=== AUTH LOGIN ATTEMPT ==='),console.log('Email:',e),console.log('API URL:',l);try{const s=await n.default.post(`${l}/api/auth/login`,{email:e,password:o});console.log('Login response:',s.data);const{session_token:u,user:c}=s.data;if(!u||!c)throw console.error('Invalid response: missing session_token or user'),new Error('Invalid response from server');return console.log('Storing session_token in AsyncStorage...'),await t.default.setItem('session_token',u),console.log('Setting token and user in state...'),A(u),h(c),console.log('\\u2705 Login successful! User:',c),c}catch(e){throw console.error('=== LOGIN ERROR ==='),console.error('Error:',e),console.error('Response:',e.response?.data),e}},register:async(e,o,s)=>{const u=await n.default.post(`${l}/api/auth/register`,{email:e,name:o,password:s}),{session_token:c,user:f}=u.data;await t.default.setItem('session_token',c),A(c),h(f)},logout:async()=>{console.log('AuthContext: logout called');try{f&&(console.log('AuthContext: calling backend logout API'),await n.default.post(`${l}/api/auth/logout`,{},{headers:{Authorization:`Bearer ${f}`}}),console.log('AuthContext: backend logout successful'))}catch(e){console.log('Logout error:',e)}finally{console.log('AuthContext: clearing AsyncStorage'),await t.default.removeItem('session_token'),console.log('AuthContext: AsyncStorage cleared'),console.log('AuthContext: clearing user and token state'),h(null),A(null),console.log('AuthContext: logout complete, user and token set to null')}},checkAuth:w},children:e})},h=()=>{const e=(0,o.useContext)(u);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,143,28,0,"Object"],[1,150,28,0,"defineProperty"],[1,165,28,0,"_e"],[1,168,28,0],[1,184,28,0,"enumerable"],[1,196,28,0],[1,198,28,0,"get"],[1,202,28,0],[1,220,28,0,"AuthProvider"],[1,221,28,0],[1,225,146,0,"Object"],[1,232,146,0,"defineProperty"],[1,247,146,0,"_e"],[1,250,146,0],[1,261,146,0,"enumerable"],[1,273,146,0],[1,275,146,0,"get"],[1,279,146,0],[1,297,146,0,"useAuth"],[1,298,146,0],[1,302,1,0],[1,306,1,0,"_react"],[1,308,1,0,"r"],[1,310,1,0,"d"],[1,312,1,0],[1,316,2,0,"AsyncStorage"],[1,318,2,0,"_interopDefault"],[1,320,2,0,"r"],[1,322,2,0,"d"],[1,324,2,0],[1,329,3,0,"axios"],[1,331,3,0,"_interopDefault"],[1,333,3,0,"r"],[1,335,3,0,"d"],[1,337,3,0],[1,342,3,26,"_reactJsxRuntime"],[1,344,3,26,"r"],[1,346,3,26,"d"],[1,348,3,26],[1,352,5,0],[1,358,5,6,"API_URL"],[1,360,5,16,"process"],[1,368,5,24,"env"],[1,372,5,28,"EXPO_PUBLIC_BACKEND_URL"],[1,396,26,6,"AuthContext"],[1,399,26,20],[1,401,26,20,"createContext"],[1,403,26,33,"createContext"],[1,423,26,63,"undefined"],[1,426,28,13,"AuthProvider"],[1,428,28,69,"AuthProvider"],[1,430,28,72,"children"],[1,445,29,2],[1,451,29,9,"user"],[1,453,29,15,"setUser"],[1,457,29,26],[1,459,29,26,"useState"],[1,461,29,34,"useState"],[1,471,29,48],[1,478,30,9,"token"],[1,480,30,16,"setToken"],[1,484,30,28],[1,486,30,28,"useState"],[1,488,30,36,"useState"],[1,498,30,52],[1,505,31,9,"loading"],[1,507,31,18,"setLoading"],[1,511,31,32],[1,513,31,32,"useState"],[1,515,31,40,"useState"],[1,526,31,41],[1,530,33,2],[1,532,33,2,"useEffect"],[1,534,33,11,"useEffect"],[1,545,33,12],[1,550,34,4,"checkAuth"],[1,555,35,5],[1,559,37,2],[1,565,37,8,"checkAuth"],[1,567,37,20,"async"],[1,577,38,4,"console"],[1,585,38,12,"log"],[1,589,38,16],[1,621,39,4],[1,625,40,6],[1,631,40,12,"storedToken"],[1,639,40,32,"AsyncStorage"],[1,641,40,44,"default"],[1,649,40,45,"getItem"],[1,657,40,53],[1,674,43,6],[1,677,41,6,"console"],[1,685,41,14,"log"],[1,689,41,18],[1,711,41,41,"storedToken"],[1,713,41,55],[1,719,41,63],[1,725,43,10,"storedToken"],[1,727,43,23],[1,728,44,8,"console"],[1,736,44,16,"log"],[1,740,44,20],[1,775,45,8,"setToken"],[1,777,45,17,"storedToken"],[1,786,48,14],[1,790,48,18,"Promise"],[1,798,48,26,"resolve"],[1,801,48,37,"setTimeout"],[1,812,48,48,"resolve"],[1,814,48,57],[1,820,50,8,"console"],[1,828,50,16,"log"],[1,832,50,20],[1,872,51,8],[1,878,51,14,"response"],[1,886,51,31,"axios"],[1,888,51,36,"default"],[1,896,51,37,"get"],[1,900,51,41],[1,903,51,44,"API_URL"],[1,919,51,67],[1,920,52,10,"headers"],[1,928,52,19],[1,929,52,21,"Authorization"],[1,943,52,36],[1,953,52,46,"storedToken"],[1,960,54,8,"console"],[1,968,54,16,"log"],[1,972,54,20],[1,994,54,43,"response"],[1,996,54,52,"data"],[1,1002,55,8,"setUser"],[1,1004,55,16,"response"],[1,1006,55,25,"data"],[1,1012,56,8,"console"],[1,1020,56,16,"log"],[1,1024,56,20],[1,1074,57,6],[1,1080,58,8,"console"],[1,1088,58,16,"log"],[1,1092,58,20],[1,1134,60,4],[1,1135,60,6],[1,1141,60,13,"error"],[1,1144,61,6,"console"],[1,1152,61,14,"error"],[1,1158,61,20],[1,1187,62,6,"console"],[1,1195,62,14,"error"],[1,1201,62,20],[1,1210,62,30,"error"],[1,1213,63,6,"console"],[1,1221,63,14,"error"],[1,1227,63,20],[1,1239,63,33,"error"],[1,1241,63,39,"response"],[1,1251,63,49,"data"],[1,1263,64,12,"AsyncStorage"],[1,1265,64,24,"default"],[1,1273,64,25,"removeItem"],[1,1284,64,36],[1,1301,65,6,"setToken"],[1,1303,65,15],[1,1309,66,6,"setUser"],[1,1311,66,14],[1,1316,67,4],[1,1317,67,5],[1,1325,68,6,"setLoading"],[1,1328,68,17],[1,1331,69,6,"console"],[1,1339,69,14,"log"],[1,1343,69,18],[1,1373,70,4],[1,1376,139,2],[1,1383,140,4],[1,1385,140,4,"_reactJsxRuntime"],[1,1387,140,4,"jsx"],[1,1392,140,5,"AuthContext"],[1,1394,140,17,"Provider"],[1,1403,140,25],[1,1404,140,26,"value"],[1,1410,140,33],[1,1411,140,35,"user"],[1,1418,140,41,"token"],[1,1426,140,48,"loading"],[1,1436,140,57,"login"],[1,1442,73,16,"async"],[1,1448,73,23,"email"],[1,1450,73,38,"password"],[1,1455,74,4,"console"],[1,1463,74,12,"log"],[1,1467,74,16],[1,1497,75,4,"console"],[1,1505,75,12,"log"],[1,1509,75,16],[1,1518,75,26,"email"],[1,1521,76,4,"console"],[1,1529,76,12,"log"],[1,1533,76,16],[1,1544,76,28,"API_URL"],[1,1547,78,4],[1,1551,79,6],[1,1557,79,12,"response"],[1,1565,79,29,"axios"],[1,1567,79,34,"default"],[1,1575,79,35,"post"],[1,1580,79,40],[1,1583,79,43,"API_URL"],[1,1602,79,69],[1,1603,79,71,"email"],[1,1611,79,78,"password"],[1,1624,80,6,"console"],[1,1632,80,14,"log"],[1,1636,80,18],[1,1654,80,37,"response"],[1,1656,80,46,"data"],[1,1662,82,6],[1,1668,82,12,"session_token"],[1,1682,82,14,"session_token"],[1,1684,82,29,"user"],[1,1689,82,35,"userData"],[1,1692,82,48,"response"],[1,1694,82,57,"data"],[1,1699,84,6],[1,1703,84,11,"session_token"],[1,1707,84,29,"userData"],[1,1709,86,8],[1,1715,85,8,"console"],[1,1723,85,16,"error"],[1,1729,85,22],[1,1780,86,14],[1,1784,86,18,"Error"],[1,1790,86,24],[1,1822,95,6],[1,1829,89,6,"console"],[1,1837,89,14,"log"],[1,1841,89,18],[1,1891,90,12,"AsyncStorage"],[1,1893,90,24,"default"],[1,1901,90,25,"setItem"],[1,1909,90,33],[1,1925,90,50,"session_token"],[1,1928,91,6,"console"],[1,1936,91,14,"log"],[1,1940,91,18],[1,1978,92,6,"setToken"],[1,1980,92,15,"session_token"],[1,1983,93,6,"setUser"],[1,1985,93,14,"userData"],[1,1988,94,6,"console"],[1,1996,94,14,"log"],[1,2000,94,18],[1,2033,94,47,"userData"],[1,2036,95,13,"userData"],[1,2037,96,4],[1,2038,96,6],[1,2044,96,13,"error"],[1,2047,100,6],[1,2053,97,6,"console"],[1,2061,97,14,"error"],[1,2067,97,20],[1,2090,98,6,"console"],[1,2098,98,14,"error"],[1,2104,98,20],[1,2113,98,30,"error"],[1,2116,99,6,"console"],[1,2124,99,14,"error"],[1,2130,99,20],[1,2142,99,33,"error"],[1,2144,99,39,"response"],[1,2154,99,49,"data"],[1,2160,100,12,"error"],[1,2161,101,4],[1,2164,140,64,"register"],[1,2173,104,19,"async"],[1,2179,104,26,"email"],[1,2181,104,41,"name"],[1,2183,104,55,"password"],[1,2188,105,4],[1,2194,105,10,"response"],[1,2202,105,27,"axios"],[1,2204,105,32,"default"],[1,2212,105,33,"post"],[1,2217,105,38],[1,2220,105,41,"API_URL"],[1,2242,105,70],[1,2243,105,72,"email"],[1,2251,105,79,"name"],[1,2258,105,85,"password"],[1,2272,106,10,"session_token"],[1,2286,106,12,"session_token"],[1,2288,106,27,"user"],[1,2293,106,33,"userData"],[1,2296,106,46,"response"],[1,2298,106,55,"data"],[1,2309,107,10,"AsyncStorage"],[1,2311,107,22,"default"],[1,2319,107,23,"setItem"],[1,2327,107,31],[1,2343,107,48,"session_token"],[1,2346,108,4,"setToken"],[1,2348,108,13,"session_token"],[1,2351,109,4,"setUser"],[1,2353,109,12,"userData"],[1,2357,140,74,"logout"],[1,2364,112,17,"async"],[1,2374,113,4,"console"],[1,2382,113,12,"log"],[1,2386,113,16],[1,2416,114,4],[1,2420,115,10,"token"],[1,2424,116,8,"console"],[1,2432,116,16,"log"],[1,2436,116,20],[1,2485,117,14,"axios"],[1,2487,117,19,"default"],[1,2495,117,20,"post"],[1,2500,117,25],[1,2503,117,28,"API_URL"],[1,2523,117,55],[1,2524,117,56],[1,2526,117,59],[1,2527,118,10,"headers"],[1,2535,118,19],[1,2536,118,21,"Authorization"],[1,2550,118,36],[1,2560,118,46,"token"],[1,2567,120,8,"console"],[1,2575,120,16,"log"],[1,2579,120,20],[1,2621,122,4],[1,2622,122,6],[1,2628,122,13,"error"],[1,2631,123,6,"console"],[1,2639,123,14,"log"],[1,2643,123,18],[1,2659,123,35,"error"],[1,2661,124,4],[1,2662,124,5],[1,2670,126,6,"console"],[1,2678,126,14,"log"],[1,2682,126,18],[1,2726,127,12,"AsyncStorage"],[1,2728,127,24,"default"],[1,2736,127,25,"removeItem"],[1,2747,127,36],[1,2764,128,6,"console"],[1,2772,128,14,"log"],[1,2776,128,18],[1,2813,131,6,"console"],[1,2821,131,14,"log"],[1,2825,131,18],[1,2871,132,6,"setUser"],[1,2873,132,14],[1,2879,133,6,"setToken"],[1,2881,133,15],[1,2887,134,6,"console"],[1,2895,134,14,"log"],[1,2899,134,18],[1,2958,136,4],[1,2961,140,82,"checkAuth"],[1,2974,140,94,"children"],[1,2983,141,7,"children"],[1,2988,146,13,"useAuth"],[1,2990,146,23,"useAuth"],[1,2995,147,2],[1,3001,147,8,"context"],[1,3004,147,18],[1,3006,147,18,"useContext"],[1,3008,147,28,"useContext"],[1,3020,147,29,"AuthContext"],[1,3023,148,2],[1,3027,148,7,"context"],[1,3029,149,4],[1,3035,149,10],[1,3039,149,14,"Error"],[1,3045,149,20],[1,3089,151,2],[1,3096,151,9,"context"],[1,3098,152,2],[1,3101]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","Promise$argument_0","login","register","logout","useAuth"],"mappings":"AAA;qEC2B;YCK;GDE;oBEE;0BCW,mCD;GFuB;gBIE;GJ6B;mBKE;GLM;iBME;GNyB;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}