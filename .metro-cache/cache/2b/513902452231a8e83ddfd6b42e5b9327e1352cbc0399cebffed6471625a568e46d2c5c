{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('session_token');\n        if (storedToken) {\n          setToken(storedToken);\n          const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${storedToken}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        session_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('session_token', session_token);\n      setToken(session_token);\n      setUser(userData);\n      return userData;\n    };\n    const register = async (email, name, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        email,\n        name,\n        password\n      });\n      const {\n        session_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('session_token', session_token);\n      setToken(session_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      console.log('AuthContext: logout called');\n      try {\n        if (token) {\n          console.log('AuthContext: calling backend logout API');\n          await axios.default.post(`${API_URL}/api/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          console.log('AuthContext: backend logout successful');\n        }\n      } catch (error) {\n        console.log('Logout error:', error);\n      } finally {\n        // Clear AsyncStorage first\n        console.log('AuthContext: clearing AsyncStorage');\n        await AsyncStorage.default.removeItem('session_token');\n        console.log('AuthContext: AsyncStorage cleared');\n\n        // Then clear state - this order ensures clean logout\n        console.log('AuthContext: clearing user and token state');\n        setUser(null);\n        setToken(null);\n        console.log('AuthContext: logout complete, user and token set to null');\n        // DON'T set loading state - let checkAuth manage it\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        checkAuth\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":141,"map":[[13,2,28,0,"Object"],[13,8,28,0],[13,9,28,0,"defineProperty"],[13,23,28,0],[13,24,28,0,"exports"],[13,31,28,0],[14,4,28,0,"enumerable"],[14,14,28,0],[15,4,28,0,"get"],[15,7,28,0],[15,18,28,0,"get"],[15,19,28,0],[16,6,28,0],[16,13,28,0,"AuthProvider"],[16,25,28,0],[17,4,28,0],[18,2,28,0],[19,2,106,0,"Object"],[19,8,106,0],[19,9,106,0,"defineProperty"],[19,23,106,0],[19,24,106,0,"exports"],[19,31,106,0],[20,4,106,0,"enumerable"],[20,14,106,0],[21,4,106,0,"get"],[21,7,106,0],[21,18,106,0,"get"],[21,19,106,0],[22,6,106,0],[22,13,106,0,"useAuth"],[22,20,106,0],[23,4,106,0],[24,2,106,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,5,0],[31,8,5,6,"API_URL"],[31,15,5,13],[31,18,5,16,"process"],[31,25,5,23],[31,26,5,24,"env"],[31,29,5,27],[31,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[31,53,5,51],[32,2,26,0],[32,8,26,6,"AuthContext"],[32,19,26,17],[32,35,26,20],[32,39,26,20,"createContext"],[32,45,26,33],[32,46,26,33,"createContext"],[32,59,26,33],[32,61,26,63,"undefined"],[32,70,26,72],[32,71,26,73],[33,2,28,7],[33,8,28,13,"AuthProvider"],[33,20,28,66],[33,23,28,69,"AuthProvider"],[33,24,28,70],[34,4,28,72,"children"],[35,2,28,81],[35,3,28,82],[35,8,28,87],[36,4,29,2],[36,10,29,8],[36,11,29,9,"user"],[36,15,29,13],[36,17,29,15,"setUser"],[36,24,29,22],[36,25,29,23],[36,28,29,26],[36,32,29,26,"useState"],[36,38,29,34],[36,39,29,34,"useState"],[36,47,29,34],[36,49,29,48],[36,53,29,52],[36,54,29,53],[37,4,30,2],[37,10,30,8],[37,11,30,9,"token"],[37,16,30,14],[37,18,30,16,"setToken"],[37,26,30,24],[37,27,30,25],[37,30,30,28],[37,34,30,28,"useState"],[37,40,30,36],[37,41,30,36,"useState"],[37,49,30,36],[37,51,30,52],[37,55,30,56],[37,56,30,57],[38,4,31,2],[38,10,31,8],[38,11,31,9,"loading"],[38,18,31,16],[38,20,31,18,"setLoading"],[38,30,31,28],[38,31,31,29],[38,34,31,32],[38,38,31,32,"useState"],[38,44,31,40],[38,45,31,40,"useState"],[38,53,31,40],[38,55,31,41],[38,59,31,45],[38,60,31,46],[39,4,33,2],[39,8,33,2,"useEffect"],[39,14,33,11],[39,15,33,11,"useEffect"],[39,24,33,11],[39,26,33,12],[39,32,33,18],[40,6,34,4,"checkAuth"],[40,15,34,13],[40,16,34,14],[40,17,34,15],[41,4,35,2],[41,5,35,3],[41,7,35,5],[41,9,35,7],[41,10,35,8],[42,4,37,2],[42,10,37,8,"checkAuth"],[42,19,37,17],[42,22,37,20],[42,28,37,20,"checkAuth"],[42,29,37,20],[42,34,37,32],[43,6,38,4],[43,10,38,8],[44,8,39,6],[44,14,39,12,"storedToken"],[44,25,39,23],[44,28,39,26],[44,34,39,32,"AsyncStorage"],[44,46,39,44],[44,47,39,44,"default"],[44,54,39,44],[44,55,39,45,"getItem"],[44,62,39,52],[44,63,39,53],[44,78,39,68],[44,79,39,69],[45,8,40,6],[45,12,40,10,"storedToken"],[45,23,40,21],[45,25,40,23],[46,10,41,8,"setToken"],[46,18,41,16],[46,19,41,17,"storedToken"],[46,30,41,28],[46,31,41,29],[47,10,42,8],[47,16,42,14,"response"],[47,24,42,22],[47,27,42,25],[47,33,42,31,"axios"],[47,38,42,36],[47,39,42,36,"default"],[47,46,42,36],[47,47,42,37,"get"],[47,50,42,40],[47,51,42,41],[47,54,42,44,"API_URL"],[47,61,42,51],[47,75,42,65],[47,77,42,67],[48,12,43,10,"headers"],[48,19,43,17],[48,21,43,19],[49,14,43,21,"Authorization"],[49,27,43,34],[49,29,43,36],[49,39,43,46,"storedToken"],[49,50,43,57],[50,12,43,60],[51,10,44,8],[51,11,44,9],[51,12,44,10],[52,10,45,8,"setUser"],[52,17,45,15],[52,18,45,16,"response"],[52,26,45,24],[52,27,45,25,"data"],[52,31,45,29],[52,32,45,30],[53,8,46,6],[54,6,47,4],[54,7,47,5],[54,8,47,6],[54,15,47,13,"error"],[54,20,47,18],[54,22,47,20],[55,8,48,6,"console"],[55,15,48,13],[55,16,48,14,"log"],[55,19,48,17],[55,20,48,18],[55,40,48,38],[55,42,48,40,"error"],[55,47,48,45],[55,48,48,46],[56,8,49,6],[56,14,49,12,"AsyncStorage"],[56,26,49,24],[56,27,49,24,"default"],[56,34,49,24],[56,35,49,25,"removeItem"],[56,45,49,35],[56,46,49,36],[56,61,49,51],[56,62,49,52],[57,6,50,4],[57,7,50,5],[57,16,50,14],[58,8,51,6,"setLoading"],[58,18,51,16],[58,19,51,17],[58,24,51,22],[58,25,51,23],[59,6,52,4],[60,4,53,2],[60,5,53,3],[61,4,55,2],[61,10,55,8,"login"],[61,15,55,13],[61,18,55,16],[61,24,55,16,"login"],[61,25,55,23,"email"],[61,30,55,36],[61,32,55,38,"password"],[61,40,55,54],[61,45,55,59],[62,6,56,4],[62,12,56,10,"response"],[62,20,56,18],[62,23,56,21],[62,29,56,27,"axios"],[62,34,56,32],[62,35,56,32,"default"],[62,42,56,32],[62,43,56,33,"post"],[62,47,56,37],[62,48,56,38],[62,51,56,41,"API_URL"],[62,58,56,48],[62,75,56,65],[62,77,56,67],[63,8,56,69,"email"],[63,13,56,74],[64,8,56,76,"password"],[65,6,56,85],[65,7,56,86],[65,8,56,87],[66,6,57,4],[66,12,57,10],[67,8,57,12,"session_token"],[67,21,57,25],[68,8,57,27,"user"],[68,12,57,31],[68,14,57,33,"userData"],[69,6,57,42],[69,7,57,43],[69,10,57,46,"response"],[69,18,57,54],[69,19,57,55,"data"],[69,23,57,59],[70,6,58,4],[70,12,58,10,"AsyncStorage"],[70,24,58,22],[70,25,58,22,"default"],[70,32,58,22],[70,33,58,23,"setItem"],[70,40,58,30],[70,41,58,31],[70,56,58,46],[70,58,58,48,"session_token"],[70,71,58,61],[70,72,58,62],[71,6,59,4,"setToken"],[71,14,59,12],[71,15,59,13,"session_token"],[71,28,59,26],[71,29,59,27],[72,6,60,4,"setUser"],[72,13,60,11],[72,14,60,12,"userData"],[72,22,60,20],[72,23,60,21],[73,6,61,4],[73,13,61,11,"userData"],[73,21,61,19],[74,4,62,2],[74,5,62,3],[75,4,64,2],[75,10,64,8,"register"],[75,18,64,16],[75,21,64,19],[75,27,64,19,"register"],[75,28,64,26,"email"],[75,33,64,39],[75,35,64,41,"name"],[75,39,64,53],[75,41,64,55,"password"],[75,49,64,71],[75,54,64,76],[76,6,65,4],[76,12,65,10,"response"],[76,20,65,18],[76,23,65,21],[76,29,65,27,"axios"],[76,34,65,32],[76,35,65,32,"default"],[76,42,65,32],[76,43,65,33,"post"],[76,47,65,37],[76,48,65,38],[76,51,65,41,"API_URL"],[76,58,65,48],[76,78,65,68],[76,80,65,70],[77,8,65,72,"email"],[77,13,65,77],[78,8,65,79,"name"],[78,12,65,83],[79,8,65,85,"password"],[80,6,65,94],[80,7,65,95],[80,8,65,96],[81,6,66,4],[81,12,66,10],[82,8,66,12,"session_token"],[82,21,66,25],[83,8,66,27,"user"],[83,12,66,31],[83,14,66,33,"userData"],[84,6,66,42],[84,7,66,43],[84,10,66,46,"response"],[84,18,66,54],[84,19,66,55,"data"],[84,23,66,59],[85,6,67,4],[85,12,67,10,"AsyncStorage"],[85,24,67,22],[85,25,67,22,"default"],[85,32,67,22],[85,33,67,23,"setItem"],[85,40,67,30],[85,41,67,31],[85,56,67,46],[85,58,67,48,"session_token"],[85,71,67,61],[85,72,67,62],[86,6,68,4,"setToken"],[86,14,68,12],[86,15,68,13,"session_token"],[86,28,68,26],[86,29,68,27],[87,6,69,4,"setUser"],[87,13,69,11],[87,14,69,12,"userData"],[87,22,69,20],[87,23,69,21],[88,4,70,2],[88,5,70,3],[89,4,72,2],[89,10,72,8,"logout"],[89,16,72,14],[89,19,72,17],[89,25,72,17,"logout"],[89,26,72,17],[89,31,72,29],[90,6,73,4,"console"],[90,13,73,11],[90,14,73,12,"log"],[90,17,73,15],[90,18,73,16],[90,46,73,44],[90,47,73,45],[91,6,74,4],[91,10,74,8],[92,8,75,6],[92,12,75,10,"token"],[92,17,75,15],[92,19,75,17],[93,10,76,8,"console"],[93,17,76,15],[93,18,76,16,"log"],[93,21,76,19],[93,22,76,20],[93,63,76,61],[93,64,76,62],[94,10,77,8],[94,16,77,14,"axios"],[94,21,77,19],[94,22,77,19,"default"],[94,29,77,19],[94,30,77,20,"post"],[94,34,77,24],[94,35,77,25],[94,38,77,28,"API_URL"],[94,45,77,35],[94,63,77,53],[94,65,77,55],[94,66,77,56],[94,67,77,57],[94,69,77,59],[95,12,78,10,"headers"],[95,19,78,17],[95,21,78,19],[96,14,78,21,"Authorization"],[96,27,78,34],[96,29,78,36],[96,39,78,46,"token"],[96,44,78,51],[97,12,78,54],[98,10,79,8],[98,11,79,9],[98,12,79,10],[99,10,80,8,"console"],[99,17,80,15],[99,18,80,16,"log"],[99,21,80,19],[99,22,80,20],[99,62,80,60],[99,63,80,61],[100,8,81,6],[101,6,82,4],[101,7,82,5],[101,8,82,6],[101,15,82,13,"error"],[101,20,82,18],[101,22,82,20],[102,8,83,6,"console"],[102,15,83,13],[102,16,83,14,"log"],[102,19,83,17],[102,20,83,18],[102,35,83,33],[102,37,83,35,"error"],[102,42,83,40],[102,43,83,41],[103,6,84,4],[103,7,84,5],[103,16,84,14],[104,8,85,6],[105,8,86,6,"console"],[105,15,86,13],[105,16,86,14,"log"],[105,19,86,17],[105,20,86,18],[105,56,86,54],[105,57,86,55],[106,8,87,6],[106,14,87,12,"AsyncStorage"],[106,26,87,24],[106,27,87,24,"default"],[106,34,87,24],[106,35,87,25,"removeItem"],[106,45,87,35],[106,46,87,36],[106,61,87,51],[106,62,87,52],[107,8,88,6,"console"],[107,15,88,13],[107,16,88,14,"log"],[107,19,88,17],[107,20,88,18],[107,55,88,53],[107,56,88,54],[109,8,90,6],[110,8,91,6,"console"],[110,15,91,13],[110,16,91,14,"log"],[110,19,91,17],[110,20,91,18],[110,64,91,62],[110,65,91,63],[111,8,92,6,"setUser"],[111,15,92,13],[111,16,92,14],[111,20,92,18],[111,21,92,19],[112,8,93,6,"setToken"],[112,16,93,14],[112,17,93,15],[112,21,93,19],[112,22,93,20],[113,8,94,6,"console"],[113,15,94,13],[113,16,94,14,"log"],[113,19,94,17],[113,20,94,18],[113,78,94,76],[113,79,94,77],[114,8,95,6],[115,6,96,4],[116,4,97,2],[116,5,97,3],[117,4,99,2],[117,24,100,4],[117,28,100,4,"_reactJsxDevRuntime"],[117,47,100,4],[117,48,100,4,"jsxDEV"],[117,54,100,4],[117,56,100,5,"AuthContext"],[117,67,100,16],[117,68,100,17,"Provider"],[117,76,100,25],[118,6,100,26,"value"],[118,11,100,31],[118,13,100,33],[119,8,100,35,"user"],[119,12,100,39],[120,8,100,41,"token"],[120,13,100,46],[121,8,100,48,"loading"],[121,15,100,55],[122,8,100,57,"login"],[122,13,100,62],[123,8,100,64,"register"],[123,16,100,72],[124,8,100,74,"logout"],[124,14,100,80],[125,8,100,82,"checkAuth"],[126,6,100,92],[126,7,100,94],[127,6,100,94,"children"],[127,14,100,94],[127,16,101,7,"children"],[128,4,101,15],[129,6,101,15,"fileName"],[129,14,101,15],[129,16,101,15,"_jsxFileName"],[129,28,101,15],[130,6,101,15,"lineNumber"],[130,16,101,15],[131,6,101,15,"columnNumber"],[131,18,101,15],[132,4,101,15],[132,11,102,26],[132,12,102,27],[133,2,104,0],[133,3,104,1],[134,2,106,7],[134,8,106,13,"useAuth"],[134,15,106,20],[134,18,106,23,"useAuth"],[134,19,106,23],[134,24,106,29],[135,4,107,2],[135,10,107,8,"context"],[135,17,107,15],[135,20,107,18],[135,24,107,18,"useContext"],[135,30,107,28],[135,31,107,28,"useContext"],[135,41,107,28],[135,43,107,29,"AuthContext"],[135,54,107,40],[135,55,107,41],[136,4,108,2],[136,8,108,6],[136,9,108,7,"context"],[136,16,108,14],[136,18,108,16],[137,6,109,4],[137,12,109,10],[137,16,109,14,"Error"],[137,21,109,19],[137,22,109,20],[137,64,109,62],[137,65,109,63],[138,4,110,2],[139,4,111,2],[139,11,111,9,"context"],[139,18,111,16],[140,2,112,0],[140,3,112,1],[141,0,112,2],[141,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","useAuth"],"mappings":"AAA;qEC2B;YCK;GDE;oBEE;GFgB;gBGE;GHO;mBIE;GJM;iBKE;GLyB;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}